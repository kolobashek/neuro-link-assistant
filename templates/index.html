{% extends "base.html" %}
{% block title %}–ù–µ–π—Ä–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/command_form.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/ai_models.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/history.css') }}" />
{% endblock %}

{% block content %}
<div class="dashboard-layout">
	<!-- –°—Ç–∞—Ç—É—Å –ø–∞–Ω–µ–ª—å -->
	<section class="dashboard-status">
		{% include "components/dashboard_status.html" %}
	</section>

	<!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å - –±—ã—Å—Ç—Ä—ã–π —á–∞—Ç -->
	<section class="dashboard-main">
		{% include "components/quick_chat.html" %}
	</section>

	<!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è -->
	<aside class="dashboard-sidebar">
		{% include "components/recent_activities.html" %}
	</aside>
</div>

<!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
<div class="quick-actions">
	<h3>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
	<div class="action-buttons">
		<a href="/models" class="btn btn-primary">ü§ñ AI –ú–æ–¥–µ–ª–∏</a>
		<a href="/tasks" class="btn btn-secondary">üìã –ó–∞–¥–∞—á–∏</a>
		<a href="/history" class="btn btn-info">üìö –ò—Å—Ç–æ—Ä–∏—è</a>
		<button class="btn btn-success" data-modal-open="aiTestModal">
			üß† –¢–µ—Å—Ç AI
		</button>
	</div>
</div>
{% endblock %}

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è AI -->
{% block modals %}
{{ super() }} <!-- –≠—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –º–æ–¥–∞–ª–∫–∏ –∏–∑ base.html -->
<div id="aiTestModal" class="modal">
	<div class="modal-content chat-modal-container">
		<!-- ‚úÖ –ù–û–í–ê–Ø –ë–û–ö–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
		<aside class="chat-sidebar">
			<div class="sidebar-header">
				<button id="newChatBtn" class="btn btn-primary">
					<i class="fas fa-plus"></i> –ù–æ–≤—ã–π —á–∞—Ç
				</button>
			</div>
			<nav class="chat-list-nav">
				<ul id="chatList" class="chat-list">
					<!-- –°—é–¥–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–∞—Ç—ã —á–µ—Ä–µ–∑ JS -->
				</ul>
			</nav>
		</aside>

		<!-- ‚úÖ –û–°–ù–û–í–ù–û–ï –û–ö–ù–û –ß–ê–¢–ê -->
		<main class="chat-main">
			<!-- –®–∞–ø–∫–∞ -->
			<div class="modal-header">
				<div class="header-info">
					<h2 id="chatTitle">–ù–æ–≤—ã–π —á–∞—Ç</h2>
					<div class="current-model-info">
						<strong id="testCurrentModel">deepseek/deepseek-v3-0324</strong>
					</div>
				</div>
				<button class="modal-close" data-modal-close="aiTestModal" title="–ó–∞–∫—Ä—ã—Ç—å">
					<i class="fas fa-times"></i>
				</button>
			</div>

			<!-- –¢–µ–ª–æ —á–∞—Ç–∞ (—Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π) -->
			<div class="modal-body chat-history" id="chatHistory">
				<!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
			</div>

			<!-- –ü–æ–¥–≤–∞–ª —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ -->
			<div class="modal-footer">
				<form id="aiTestForm" class="chat-form">
					<div class="input-wrapper">
						<textarea id="aiPrompt" name="prompt" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." rows="1" required></textarea>
						<button type="submit" class="send-btn" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
							<i class="fas fa-paper-plane"></i>
						</button>
					</div>
				</form>
			</div>
		</main>
	</div>
</div>
{% endblock %}


{% block extra_js %}
<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º dashboard.js –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

<!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
<script src="{{ url_for('static', filename='js/utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/fixes.js') }}"></script>
{% endblock %}
