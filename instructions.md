<think>Проанализирую инструкции в файле instructions.md для их оптимизации:

1. Действительно, есть много дублирующейся информации и детализации, которую можно сократить
2. Нужно добавить наш новый подход с "гранд-тестами" (системными тестами)
3. Обновить информацию о текущем состоянии проекта
4. Сделать документ более лаконичным и структурированным

Основные разделы, которые следует сохранить:
- Обзор проекта
- Методология разработки (включая наш новый подход)
- План рефакторинга (но более компактный)
- Приоритеты разработки
- Технические детали и стандарты

Разделы, которые можно сократить:
- Дублирующиеся детали архитектуры
- Избыточные технические детали
- Повторяющиеся описания принципов TDD

Добавлю новую информацию о:
- Подходе с системными тестами
- Текущем состоянии тестирования
- Обновленном плане рефакторинга</think>
# Обновленные инструкции по проекту Neuro-Link Assistant

## 1. Обзор проекта

**Neuro-Link Assistant** - платформа для оркестрации различных моделей искусственного интеллекта и автоматизации задач. Система объединяет доступ к разным типам моделей AI и обеспечивает пошаговое выполнение задач.

### 1.1. Структура интерфейса

- **Главная/Дашборд** (`/`) - центр управления с формой ввода задач
- **Центр задач** (`/tasks`) - управление активными и историческими задачами
- **Центр управления моделями** (`/ai_models`) - настройка и управление моделями AI
- **Оркестратор моделей** (`/orchestrator`) - настройка маршрутизации
- **Шаблоны и рабочие процессы** (`/workflows`) - управление готовыми процессами
- **Настройки** (`/settings`) - общие настройки системы
- **Центр аналитики** (`/analytics`) - статистика и анализ выполнения задач

## 2. Методология разработки

### 2.1. Принципы TDD с подходом "сверху вниз"

Проект разрабатывается с использованием модифицированной методологии TDD:

1. **Системные тесты сначала** (подход "сверху вниз"):
   - Создание "гранд-тестов", проверяющих общую функциональность системы
   - Выявление необходимых компонентов через тесты
   - Постепенная детализация тестов и компонентов

2. **Процесс разработки**:
   - **Красный**: Создать системный/интеграционный/модульный тест, который не проходит
   - **Зеленый**: Написать минимальный код для прохождения теста
   - **Рефакторинг**: Улучшить код, сохраняя его функциональность

### 2.2. Состояние тестирования

#### 2.2.1. Текущий статус

✅ **Системные тесты**:
- `tests/system/test_application_workflow.py` - базовый рабочий процесс приложения

✅ **Модульные тесты**:
- Тесты реестра компонентов
- Тесты обработчика ошибок
- Тесты подсистемы ввода
- Частичные тесты файловой системы

❌ **Требуются тесты для**:
- Подсистемы компьютерного зрения
- Подсистемы взаимодействия с веб
- Интеграции LLM
- Системы принятия решений
- Подсистемы базы данных

## 3. Архитектура системы

### 3.1. Структура каталогов

```
core/
├── common/                       # Общие компоненты и базовые классы
│   ├── error_handler.py
│   ├── filesystem/               # Абстракции файловой системы
│   ├── input/                    # Абстракции ввода
│   ├── registry/                 # Компоненты реестра
│   └── другие абстракции...
│
├── platform/                     # Платформенно-зависимый код
│   └── windows/                  # Реализации для Windows
│       ├── filesystem/
│       └── input/
│
├── system.py                     # Основной класс системы
├── system_initializer.py         # Инициализатор системы
├── task.py                       # Классы задач
├── plugin_manager.py             # Менеджер плагинов
│
└── подсистемы (vision, web, llm)
```

### 3.2. Архитектурные принципы

- **SOLID** принципы с особым акцентом на единственную ответственность (S) и инверсию зависимостей (D)
- **Паттерны проектирования**: Фабрика, Стратегия, Наблюдатель, Команда
- **Абстракции и интерфейсы** для всех ключевых компонентов

## 4. План рефакторинга и развития

### 4.1. Краткосрочные цели (1-2 недели)

- [x] Системный тест для базового рабочего процесса приложения ✅
- [x] Минимальная реализация подсистемы задач ✅
- [ ] Интеграционные тесты для файловой системы
- [ ] Полная реализация файловой системы

### 4.2. Среднесрочные цели (3-4 недели)

- [ ] Системные тесты для работы с LLM и веб-автоматизации
- [ ] Рефакторинг подсистемы компьютерного зрения
- [ ] Интеграция рефакторизованных подсистем
- [ ] Расширение тестового покрытия до 50%

### 4.3. Долгосрочные цели (2-3 месяца)

- [ ] Полный рефакторинг ядра системы
- [ ] Рефакторинг всех подсистем
- [ ] Тестовое покрытие не менее 80%
- [ ] Полная документация API и компонентов

## 5. Приоритеты разработки

1. **Первый приоритет**:
   - Системные тесты для ключевых сценариев
   - Завершение рефакторинга файловой системы
   - Подсистема ввода и взаимодействия с Windows

2. **Второй приоритет**:
   - Подсистема компьютерного зрения
   - Взаимодействие с веб
   - Интеграционные тесты между подсистемами

3. **Третий приоритет**:
   - Подсистема LLM
   - База данных и хранение состояния
   - Система плагинов

## 6. Стандарты кодирования

### 6.1. Соглашения об именовании

- **Классы**: CamelCase (например, `FileManager`)
- **Методы и функции**: snake_case (например, `read_file`)
- **Константы**: UPPER_SNAKE_CASE (например, `DEFAULT_TIMEOUT`)
- **Приватные члены**: Префикс с подчеркиванием (например, `_private_method`)
- **Интерфейсы**: Префикс Abstract или суффикс Base (например, `AbstractKeyboard`)

### 6.2. Документирование кода

- Каждый класс и публичный метод должен иметь docstring
- Использование типизации (type hints) для всех функций и методов
- Пояснение сложных алгоритмов через комментарии

### 6.3. Тестирование

- Каждый новый компонент должен иметь тесты
- Тесты должны быть независимыми друг от друга
- Предпочтительно использование фикстур pytest
- Моки для изоляции тестируемых компонентов

## 7. Процесс разработки новых компонентов

1. Создание системного или интеграционного теста, определяющего требуемое поведение
2. Создание модульных тестов для компонентов
3. Минимальная реализация для прохождения тестов
4. Рефакторинг с сохранением функциональности
5. Обновление документации

## 8. Текущее состояние проекта

- **Реализованы**: Базовая система компонентов, минимальные задачи, инициализация системы
- **В процессе**: Файловая система, компьютерное зрение, веб-взаимодействие
- **Покрытие тестами**: Общее - 13%, модули core\system.py и core\task.py - 100%

## 9. Документация

```
docs/
├── architecture/
│   ├── overview.md             # Обзор архитектуры
│   ├── components.md           # Компонентная модель
│   ├── subsystems.md           # Описание подсистем
│   └── interfaces.md           # Ключевые интерфейсы
├── development/
│   ├── methodology.md          # Методология разработки (TDD сверху вниз)
│   ├── testing.md              # Подход к тестированию
│   ├── standards.md            # Стандарты кодирования
│   └── workflow.md             # Рабочий процесс разработки
├── guides/
│   ├── setup.md                # Настройка среды разработки
│   ├── contribution.md         # Руководство по внесению изменений
│   └── troubleshooting.md      # Устранение неполадок
├── api/
│   ├── core.md                 # API ядра системы
│   ├── components.md           # API компонентов
│   └── subsystems.md           # API подсистем
└── plans/
    ├── roadmap.md              # Общая дорожная карта
    └── milestones.md           # Ключевые вехи проекта
```

---

**Последнее обновление:** 2024-05-25
