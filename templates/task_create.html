{% extends "base.html" %}

{% block title %}–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ - Neuro Link Assistant{% endblock %}

{% block content %}
<div class="task-creation-container">
    <div class="page-header">
        <h1><i class="fas fa-plus"></i> –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏</h1>
        <p class="page-description">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏</p>
    </div>

    <form class="task-creation-form" method="POST" action="/tasks/create" onsubmit="return handleSubmit(event)">
        <div class="form-group">
            <label for="task-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
            <input type="text" id="task-name" name="task_name" class="form-control task-input" required>
        </div>

        <div class="form-group">
            <label for="task-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea id="task-description" name="task_description" class="form-control task-input" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label for="task-type">–¢–∏–ø –∑–∞–¥–∞—á–∏:</label>
            <select id="task-type" name="task_type" class="form-control">
                <option value="automation">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</option>
                <option value="data-processing">–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</option>
                <option value="analysis">–ê–Ω–∞–ª–∏–∑</option>
                <option value="web-scraping">–í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥</option>
            </select>
        </div>

        <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="window.location.href='/tasks'">
                –û—Ç–º–µ–Ω–∞
            </button>
            <button type="submit" class="btn btn-primary submit-task">
                <i class="fas fa-play"></i> –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
            </button>
        </div>
    </form>
</div>

<script>
function handleSubmit(event) {
    console.log('üîç [DEBUG] Form submission started');
    const form = event.target;
    const formData = new FormData(form);

    console.log('üîç [DEBUG] Form data:');
    for (let [key, value] of formData.entries()) {
        console.log(`  ${key}: ${value}`);
    }

    // –†–∞–∑—Ä–µ—à–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
    return true;
}
</script>
{% endblock %}

{% block styles %}
<style>
.task-creation-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
}

.task-creation-form {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid #ddd;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: #333;
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
}

.form-control:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    margin-top: 2rem;
}
</style>
{% endblock %}
