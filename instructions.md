<think>Мне нужно скорректировать инструкции проекта, учитывая текущий прогресс и результаты системных тестов. Вижу, что имеющиеся инструкции нужно обновить в следующих аспектах:

1. Добавить информацию о системных тестах, которые мы разработали
2. Обновить статус задач и приоритетов
3. Сделать больший акцент на подходе TDD "сверху вниз"
4. Обновить план разработки с учетом выявленных задач
5. Указать, какие компоненты нужно реализовать в первую очередь для прохождения тестов

Также надо сделать инструкции более лаконичными и практичными, фокусируясь на конкретных шагах развития проекта.</think>
# Обновленные инструкции по проекту Neuro-Link Assistant

## 1. Обзор проекта

**Neuro-Link Assistant** - платформа для оркестрации различных моделей искусственного интеллекта и автоматизации задач. Система объединяет доступ к разным типам моделей AI и обеспечивает пошаговое выполнение задач.

## 2. Методология разработки - TDD "сверху вниз"

Проект разрабатывается с использованием **TDD (Test-Driven Development)** с подходом "сверху вниз":

1. **Системные тесты сначала** - создаем высокоуровневые тесты, описывающие работу системы в целом
2. **"Красный-Зеленый-Рефакторинг"**:
   - **Красный**: Начинаем с системных тестов, которые не проходят
   - **Зеленый**: Реализуем необходимую функциональность для прохождения тестов
   - **Рефакторинг**: Улучшаем код, сохраняя работающие тесты

## 3. Текущее состояние тестирования

### 3.1. Реализованные системные тесты (все созданы)

| Название теста | Статус | Описание | Приоритет |
|----------------|--------|----------|-----------|
| test_application_workflow | ✅ Проходит | Базовый рабочий процесс приложения | Выполнено |
| test_llm_basic_interaction | ✅ Проходит | Взаимодействие с языковыми моделями | Выполнено* |
| test_file_operations | ❌ Не проходит | Создание, чтение, запись, удаление файлов | Высокий |
| test_windows_automation | ❌ Не проходит | Автоматизация работы с Windows-приложениями | Высокий |
| test_computer_vision | ❌ Не проходит | Захват экрана и распознавание элементов | Средний |
| test_web_automation | ❌ Не проходит | Автоматизация веб-поиска | Средний |
| test_model_orchestration | ❌ Не проходит | Оркестрация нескольких моделей | Низкий |
| test_plugin_system | ❌ Не проходит | Загрузка и выполнение плагинов | Низкий |
| test_task_management | ❌ Не проходит | Жизненный цикл задачи и история | Средний |

_* Тест проходит, но требует улучшения функциональности_

### 3.2. Необходимые компоненты для реализации

Для прохождения тестов требуется реализовать:

1. **Компоненты класса System**:
   - Метод `get_plugin_manager()`
   - Атрибут `task_manager` с методами save_task, get_task, get_task_history

2. **Обработка задач в Task**:
   - Распознавание типа задачи из описания
   - Выполнение файловых операций
   - Взаимодействие с Windows-приложениями
   - Операции компьютерного зрения
   - Веб-автоматизация

3. **Дополнительные подсистемы**:
   - Файловая система (создание, чтение, запись, удаление)
   - Автоматизация Windows (запуск приложений, взаимодействие)
   - Компьютерное зрение (захват экрана, поиск элементов)
   - Веб-автоматизация (работа с браузером)

## 4. План разработки (обновленный)

### 4.1. Ближайшие задачи (высокий приоритет)

1. **Расширение класса System**:
   ```python
   # core/system.py
   def get_plugin_manager(self):
       """Возвращает менеджер плагинов системы."""
       return self._registry.get("plugin_manager")

   @property
   def task_manager(self):
       """Возвращает менеджер задач системы."""
       return self._registry.get("task_manager")
   ```

2. **Создание TaskManager**:
   ```python
   # core/task_manager.py
   class TaskManager:
       def save_task(self, task):
           """Сохраняет задачу и возвращает её ID."""
           # Реализация

       def get_task(self, task_id):
           """Возвращает задачу по ID."""
           # Реализация

       def get_task_history(self):
           """Возвращает историю задач."""
           # Реализация
   ```

3. **Реализация файловых операций**:
   - Интеграция абстракций из `core/common/filesystem/base.py`
   - Реализация конкретных операций для Windows
   - Подключение к классу Task для распознавания файловых команд

### 4.2. Задачи средней срочности

1. **Автоматизация Windows**:
   - Запуск приложений
   - Взаимодействие с элементами окон
   - Управление вводом для выполнения действий

2. **Компьютерное зрение**:
   - Захват экрана
   - Поиск элементов на экране
   - Распознавание текста и объектов

3. **Веб-автоматизация**:
   - Управление браузером
   - Выполнение поисковых запросов
   - Извлечение данных с веб-страниц

### 4.3. Долгосрочные задачи

1. **Оркестрация моделей**:
   - Координация нескольких моделей AI
   - Распределение задач между моделями

2. **Система плагинов**:
   - Полноценная загрузка и выполнение плагинов
   - API для создания пользовательских плагинов

## 5. Архитектура системы

```
core/
├── common/                       # Общие компоненты и базовые классы
│   ├── error_handler.py          # Обработка ошибок
│   ├── filesystem/               # Абстракции файловой системы
│   ├── input/                    # Абстракции ввода
│   └── registry/                 # Компоненты реестра
│
├── platform/                     # Платформенно-зависимый код
│   └── windows/                  # Реализации для Windows
│       ├── filesystem/           # Файловые операции Windows
│       └── input/                # Ввод Windows
│
├── system.py                     # Класс System
├── system_initializer.py         # Инициализатор системы
├── task.py                       # Класс Task и TaskResult
├── task_manager.py               # NEW: Менеджер задач
│
└── подсистемы (vision, web, llm)
```

## 6. Следующие шаги по TDD

1. **Реализовать методы класса System**:
   ```bash
   pytest tests/system/test_plugin_system.py -v
   pytest tests/system/test_task_management.py -v
   ```

2. **Реализовать файловые операции**:
   ```bash
   pytest tests/system/test_file_operations.py -v
   ```

3. **Реализовать автоматизацию Windows**:
   ```bash
   pytest tests/system/test_windows_automation.py -v
   ```

## 7. Стандарты кодирования

- **Классы**: CamelCase (например, `FileManager`)
- **Методы и функции**: snake_case (например, `read_file`)
- **Константы**: UPPER_SNAKE_CASE (например, `DEFAULT_TIMEOUT`)
- **Абстракции**: префикс Abstract (например, `AbstractFileSystem`)
- **Docstrings**: для всех публичных классов и методов
- **Типизация**: использовать аннотации типов (type hints)

## 8. Приоритеты интеграции существующего кода

1. **core/common/filesystem/**: уже создана абстракция, требуется реализация
2. **core/platform/windows/input/**: существуют клавиатура и мышь, требуется интеграция
3. **core/common/error_handler.py**: используется в системе, расширять по необходимости

## 9. Покрытие кода и метрики

- Текущее покрытие тестами: **13%**
- Целевое покрытие: **80%**
- Регулярно проверять покрытие новой функциональности тестами

## 10. Организация проекта и процесс разработки

1. **Создание системного теста** - определяем требуемое поведение
2. **Реализация минимальной функциональности** для прохождения теста
3. **Создание модульных тестов** для отдельных компонентов
4. **Рефакторинг** с сохранением работоспособности тестов
5. **Документирование** реализованной функциональности

---

**Последнее обновление:** 2025-05-23
